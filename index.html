<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pacman Novia Virtual Interactiva</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
            font-family: Arial, sans-serif;
        }
        #gameContainer {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        canvas {
            border: 2px solid black;
        }
        #questionInput {
            margin-top: 10px;
            width: 300px;
            padding: 5px;
        }
        #response {
            margin-top: 10px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <canvas id="gameCanvas" width="600" height="400"></canvas>
        <input type="text" id="questionInput" placeholder="Hazme una pregunta...">
        <div id="response"></div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const questionInput = document.getElementById('questionInput');
        const responseDiv = document.getElementById('response');

        // Configuración de Pacman
        let pacmanPos = { x: 300, y: 200 };
        const pacmanRadius = 50;
        let mouthAngle = 0;
        let mouthSpeed = 0.1;

        // Colores
        const YELLOW = '#FFFF00';
        const PINK = '#FFC0CB';
        const BLACK = '#000000';

        // Movimiento
        const speed = 5;
        let keys = {};

        function drawPacman() {
            ctx.beginPath();
            ctx.arc(pacmanPos.x, pacmanPos.y, pacmanRadius, mouthAngle, 2 * Math.PI - mouthAngle);
            ctx.lineTo(pacmanPos.x, pacmanPos.y);
            ctx.fillStyle = YELLOW;
            ctx.fill();
            ctx.closePath();

            // Ojo
            ctx.beginPath();
            ctx.arc(pacmanPos.x + 15, pacmanPos.y - 15, 5, 0, 2 * Math.PI);
            ctx.fillStyle = BLACK;
            ctx.fill();
            ctx.closePath();

            // Moño
            ctx.fillStyle = PINK;
            ctx.fillRect(pacmanPos.x - 25, pacmanPos.y - 70, 50, 20);
            ctx.beginPath();
            ctx.moveTo(pacmanPos.x - 25, pacmanPos.y - 60);
            ctx.lineTo(pacmanPos.x - 40, pacmanPos.y - 40);
            ctx.lineTo(pacmanPos.x - 10, pacmanPos.y - 50);
            ctx.fill();
            ctx.beginPath();
            ctx.moveTo(pacmanPos.x + 25, pacmanPos.y - 60);
            ctx.lineTo(pacmanPos.x + 40, pacmanPos.y - 40);
            ctx.lineTo(pacmanPos.x + 10, pacmanPos.y - 50);
            ctx.fill();
        }

        function update() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Mover Pacman
            if (keys['ArrowLeft']) pacmanPos.x -= speed;
            if (keys['ArrowRight']) pacmanPos.x += speed;
            if (keys['ArrowUp']) pacmanPos.y -= speed;
            if (keys['ArrowDown']) pacmanPos.y += speed;

            // Mantener a Pacman dentro del canvas
            pacmanPos.x = Math.max(pacmanRadius, Math.min(pacmanPos.x, canvas.width - pacmanRadius));
            pacmanPos.y = Math.max(pacmanRadius, Math.min(pacmanPos.y, canvas.height - pacmanRadius));

            // Animar la boca
            mouthAngle += mouthSpeed;
            if (mouthAngle > Math.PI / 4 || mouthAngle < 0) {
                mouthSpeed = -mouthSpeed;
            }

            drawPacman();
            requestAnimationFrame(update);
        }

        function processQuestion(question) {
            const responses = {
                "hola": "¡Hola! ¿Cómo estás?",
                "como estas": "Estoy bien, ¡gracias por preguntar!",
                "quien eres": "Soy tu Pacman novia virtual",
            };
            return responses[question.toLowerCase()] || "Lo siento, no entiendo esa pregunta.";
        }

        // Event Listeners
        window.addEventListener('keydown', (e) => keys[e.key] = true);
        window.addEventListener('keyup', (e) => keys[e.key] = false);

        questionInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                const response = processQuestion(questionInput.value);
                responseDiv.textContent = response;
                questionInput.value = '';
            }
        });

        // Iniciar el juego
        update();
    </script>
</body>
</html>